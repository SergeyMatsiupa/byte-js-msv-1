<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>TTTTTTTT</title>
  <style>
    table {
      border-collapse: collapse;
    }

    td {
      border: 1px solid black;
      padding: 3px 5px;
    }


    body {
      padding: 20px 0 0 20px;
      cursor: pointer;
    }

    #field {
      overflow: hidden;
      width: 200px;
      height: 150px;
      border-top: 10px solid black;
      border-right: 10px solid gray;
      border-bottom: 10px solid gray;
      border-left: 10px solid black;
      background-color: #00FF00;
      font: 10px/1.2 monospace;
    }

    .triangle-right {
      position: relative;
      width: 0;
      height: 0;
      border-top: 6px solid transparent;
      border-bottom: 6px solid transparent;
      border-left: 20px solid red;
      text-indent: -20px;
      font: 12px/1 monospace;
    }


    .note {
      position: fixed;
      z-index: 1000;
      padding: 5px;
      border: 1px solid black;
      background: white;
      text-align: center;
      font: italic 14px serif;
    }

    blockquote {
      background: #f9f9f9;
      border-left: 10px solid #ccc;
      margin: 0 0 0 100px;
      padding: .5em 10px;
      quotes: "\201C""\201D""\2018""\2019";
      display: inline-block;
      white-space: pre;
    }

    blockquote:before {
      color: #ccc;
      content: open-quote;
      font-size: 4em;
      line-height: .1em;
      margin-right: .25em;
      vertical-align: -.4em;
    }

    .for-scroll {
      height: 200px;
      width: 25%;
      overflow: auto;
    }



    #field {
      width: 200px;
      border: 10px groove black;
      background-color: #00FF00;
      position: relative;
    }

    #ball {
      position: absolute;
    }

  </style>
</head>

<body>
  <!-- <table>
    <tr>
      <td>1:1</td>
      <td>2:1</td>
      <td>3:1</td>
      <td>4:1</td>
      <td>5:1</td>
    </tr>
    <tr>
      <td>1:2</td>
      <td>2:2</td>
      <td>3:2</td>
      <td>4:2</td>
      <td>5:2</td>
    </tr>
    <tr>
      <td>1:3</td>
      <td>2:3</td>
      <td>3:3</td>
      <td>4:3</td>
      <td>5:3</td>
    </tr>
    <tr>
      <td>1:4</td>
      <td>2:4</td>
      <td>3:4</td>
      <td>4:4</td>
      <td>5:4</td>
    </tr>
    <tr>
      <td>1:5</td>
      <td>2:5</td>
      <td>3:5</td>
      <td>4:5</td>
      <td>5:5</td>
    </tr>
  </table>

   -->

   <ul id="ul">
    <li class="fruits fruit__1">apples</li>
    <li class="fruits fruit__2">oranges</li>
    <li class="fruits fruit__3">pears</li>
    <li class="fruits fruit__4">grapes</li>
  </ul>


  <div class="alert" id="div">
    <strong>Всем привет!</strong> Вы прочитали важное сообщение.
  </div>


  <table id="table">
    aaa
    <tr>
      <td>Тест</td>
    </tr>
  </table>

  <ul>
    <li>
      1
    </li>
    <li>2</li>
    <li>3</li>
  </ul>

  <div id="container">
    <p>container</p>
  </div>

  <div id="for_calender">

  </div>


  <div id="for_timer">
    <div>
      <span>hh</span>
      :
      <span>mm</span>
      :
      <span>ss</span>
    </div>
    <button id="start-timer">
      Start
    </button>
    <button id="stop-timer">
      Stop
    </button>
  </div>


  <ul id="ul">
    <li id="one">1</li>
    <li id="two">4</li>
  </ul>

  
  <table id="tbl_f_sort">
    <tbody>
    <tr>
      <th id="capt_f_sort">Имя</th>
      <th>Фамилия</th>
      <th>Возраст</th>
    </tr>
    <tr>
      <td>John</td>
      <td>Smith</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Pete</td>
      <td>Brown</td>
      <td>15</td>
    </tr>
    <tr>
      <td>Ann</td>
      <td>Lee</td>
      <td>5</td>
    </tr>
    <tr>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    </tbody>
  </table>

  Кликните в любом месте для получения координат в контексте окна.
  <br> Это для тестирования, чтобы проверить результат, который вы получили с помощью JavaScript.
  <br>
  <div id="coords">(координаты покажутся здесь)</div>


  <div id="field">
    . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
  </div>
  <div id="coords-my">(координаты покажутся здесь)</div>

  <div class="triangle-right" style="left:-20px;top:-176px">1</div>
  <div class="triangle-right" style="left:-10px;top:-178px">3</div>
  <div class="triangle-right" style="left:190px;top:-40px">4</div>
  <div class="triangle-right" style="left:200px;top:-42px">2</div>



  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Reprehenderit sint atque dolorum fuga ad incidunt voluptatum error fugiat animi amet! Odio temporibus nulla id unde quaerat dignissimos enim nisi rem provident molestias sit tempore omnis recusandae
    esse sequi officia sapiente.</p>

  <blockquote>
    Teacher: Why are you late?
    Student: There was a man who lost a hundred dollar bill.
    Teacher: That's nice. Were you helping him look for it?
    Student: No. I was standing on it.
  </blockquote>

  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Reprehenderit sint atque dolorum fuga ad incidunt voluptatum error fugiat animi amet! Odio temporibus nulla id unde quaerat dignissimos enim nisi rem provident molestias sit tempore omnis recusandae
    esse sequi officia sapiente.</p>



  <div class="for-scroll">
    <p>
      Lorem ipsum dolor sit amet consectetur, adipisicing elit. Harum libero aperiam iure aspernatur, necessitatibus enim ipsam dolor officia tempora veritatis iste, facilis cupiditate dignissimos quo consequuntur veniam impedit aliquam iusto accusamus voluptatibus unde neque et sint minima. Earum reprehenderit deleniti aspernatur impedit expedita iste reiciendis ea sequi labore, voluptate, eligendi magni provident nobis dolore atque nemo rerum voluptates! Laudantium perspiciatis minus est voluptatum cumque debitis libero et, culpa pariatur nemo expedita voluptates cum aliquid obcaecati at, similique modi velit, voluptate maxime? Sit aspernatur voluptates obcaecati! Blanditiis fugit ducimus, at, expedita quis amet veritatis harum iusto necessitatibus provident alias laborum repudiandae!
    </p>
  </div>
  <div id="scrollBottom-id"></div>


  
  
  <div id="field">
    <img src="https://en.js.cx/clipart/ball.svg" id="ball"> . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
  </div>
  
  
  <script>
    // let table = document.body.firstElementChild;

    // // ваш код



    // returns NodeList (static and live)
    const fruits = document.querySelectorAll('.fruits');
    console.log(`fruits`, fruits)
     fruits.item(0).innerHTML += 'sss';

    const fruits1 = document.querySelector('.fruits');
    // const fruits1 = document.querySelector('ul');
     console.log(`fruits1`, fruits1)
    const childFruit = fruits1.childNodes;
     console.log(`childFruit`, childFruit)

    // returns HTMLCollection (using item method)
    const fruits3 = document.getElementsByClassName('fruits');
    fruits3.item(0).classList.add('apples')
     console.log(`fruits3`, fruits3)


    const fruitsL = document.querySelectorAll('ul').item(0);
    // console.log(`fruitsL`, fruitsL)
    const newLI = fruitsL.lastElementChild.cloneNode();
    newLI.textContent = '!last!';
    newLI.classList.replace('fruit__4', 'fruit__5');
    fruitsL.appendChild(newLI);



    ul.before('before'); // вставить строку "before" перед <ol>
    ul.after('after'); // вставить строку "after" после 


    let div2 = div.cloneNode(true); // клонировать сообщение
    div2.querySelector('strong').innerHTML = 'Всем пока!'; // изменить клонированный элемент
    div.after(div2); // показать клонированный элемент после существующего div

    

    function clear(ul) { 
        console.log(`ul`, ul);
        [...ul.childNodes].forEach(node => node.remove());
        // for (let node of ul.children) {
            // console.log(`node`, node)
            // node.remove();
            // ul.removeChild(node);
        // }
     }
    clear(ul); // очищает список



    // table.remove();


    const createUL = () => {
      const objUL = document.createElement('ul');
      document.body.append(objUL);
      do {
        const liTxt = prompt('Please enter text for list item').trim();
        if (liTxt) {
          objUL.appendChild(document.createElement('li')).append(liTxt);
        } else {
          break;
        }
      } while(true)
    }
    // createUL();



    let data = {
  "Рыбы": {
    "форель": {},
    "лосось": {}
  },

  "Деревья": {
    "Огромные": {
      "секвойя": {},
      "дуб": {}
    },
    "Цветковые": {
      "яблоня": {},
      "магнолия": {}
    }
  }
};


  const createTree = (container, data) => {
    console.log(`container`, container)
    
    const objUL = (container.nodeName == 'UL' ) ? container : container.appendChild(document.createElement('ul'));

    for ( let item in data) {
      if (Object.entries(data[item]).length > 0) {
          // console.log(`data[item]`, data[item]);
          console.log(`OUT item`, item);
          // <ul>
          //   <li>
          //     item
          //       ...<ul> </ul>
          //   </li>  
          // </ul>
        const objLI = objUL.appendChild(document.createElement('li'));
        objLI.append(item);
        const objIUL = objLI.appendChild(document.createElement('ul'));
        createTree(objIUL, data[item]);
      } else {
            // console.log(`container`, container);
            console.log(`IN item`, item);
          container.appendChild(document.createElement('li')).append(item);
      }
    }
  }

  let container = document.getElementById('container');
  createTree(container, data); // создаёт дерево в контейнере



  const addNumbOfNested = (elem) => {
    
    const getNumbOfNested = (curLiElem) => {
      return curLiElem.querySelectorAll('li').length;
    }

      // console.log(`elem`, elem)
    const liItems = elem.querySelectorAll('li');
      console.log(`liItems`, liItems)
    for (let curLiElem of liItems) {
      const numbOfNested = getNumbOfNested(curLiElem);
      curLiElem.firstChild.textContent += numbOfNested ? ` [${numbOfNested}]` : '';
    }
  }


  addNumbOfNested(document.querySelector('#container > ul'));



  const createCalendar = (elem, year, month) => {
    const daysArr = ['пн',	'вт',	'ср',	'чт',	'пт',	'сб',	'вс'];
    const tblObj = elem.appendChild(document.createElement('table')).appendChild(document.createElement('tbody'));
    const rowHObj = tblObj.appendChild(document.createElement('tr'));
    // make a header row
    for (let i = 0; i < 7; i++) {
      rowHObj.appendChild(document.createElement('th')).append(daysArr[i]);
    }
    let startDate = new Date(year, month - 1, 1);
    do {
      let rowObj = tblObj.appendChild(document.createElement('tr'));
      for ( let i = 0; i < 7; i++) {
        tdObj = rowObj.appendChild(document.createElement('td'));
        if ((startDate.getDay() === (i===6 ? 0 : i + 1)) && 
            (startDate.getMonth() === month-1)) {
          tdObj.append(startDate.getDate());
          startDate.setDate(startDate.getDate() + 1);
        }
      }
    } while (startDate.getMonth() === month-1)
  }
  
  createCalendar(document.querySelector('#for_calender'), 2012, 12);


  let nIntervId;

  const startTimer = (event) => {
    
    const writeTime = () => {
      const timerDiv = document.querySelector("#for_timer > div")
      const hhElem = timerDiv.querySelectorAll('span');
      const nowDate = new Date();
      hhElem.item(0).textContent = ("0" + nowDate.getHours()).slice(-2);
      hhElem.item(1).textContent = ("0" + nowDate.getMinutes()).slice(-2);
      hhElem.item(2).textContent = ("0" + nowDate.getSeconds()).slice(-2);
    }

    writeTime();
    nIntervId = setInterval(writeTime, 1000);
    // console.log(`hhElem`, hhElem);
  }

  const stopTimer = (event) => {
    clearInterval(nIntervId);
  }

  const startTimerButton = document.querySelector("#start-timer");
  startTimerButton.addEventListener("click", startTimer);
  const stopTimerButton = document.querySelector("#stop-timer");
  stopTimerButton.addEventListener("click", stopTimer);

  const li1Elem = document.querySelector("#ul > #one");
  let liCElem = document.createElement('li');
  liCElem.innerText = '3';
  li1Elem.after(liCElem);
  liCElem = document.createElement('li');
  liCElem.innerText = '2';
  li1Elem.after(liCElem);
    // console.log(`li1Elem`, li1Elem);




  let sortTblToAsc;
  
  const doSortTbl = (event) => {

    let wasChanges;
    let j = 0;
    do {
      const rows = document.querySelectorAll('#tbl_f_sort > tbody > tr');
      wasChanges = false;
      for (let i=1; i < rows.length-1; i++) {
        if (rows.item(i).children[0].innerText[0] > rows.item(i+1).children[0].innerText[0]) {
          rows.item(i+1).after(rows.item(i));
            wasChanges = true;
        }
      } 
    } while (wasChanges )
  }
  
  document.querySelector('#capt_f_sort').addEventListener('click', doSortTbl);





  // получаем координаты элемента в контексте документа
function getCoords(elem) {
    let box = elem.getBoundingClientRect();

    return {
      top: box.top + window.pageYOffset,
      right: box.right + window.pageXOffset,
      bottom: box.bottom + window.pageYOffset,
      left: box.left + window.pageXOffset
    };
  }


  function createMessageUnder(elem, html) {
    let message = document.createElement('div');
    message.style.cssText = "position:absolute; color: red";

    let coords = getCoords(elem);

    message.style.left = coords.left + "px";
    message.style.top = coords.bottom + "px";

    message.innerHTML = html;

    return message;
  }

  let message = createMessageUnder(document.querySelector('#table'), 'big dick');
  document.body.append(message);




  document.onclick = function(e) { // показывает координаты точки клика
      coords.innerHTML = e.clientX + ':' + e.clientY;
    };

  const c1 = document.querySelector('#field').getBoundingClientRect();
    console.log(`c1`, c1)
  const c2 = window.getComputedStyle(document.querySelector('#field'));
  document.querySelector('#coords-my').innerText = `${c1.top}  ${c1.left}
  ${c1.top + c1.height}  ${c1.left + c1.width}
  ${c1.top + parseInt(c2["border-left-width"])}  ${c1.left + parseInt(c2["border-top-width"])}
  ${c1.top + c1.height - parseInt(c2["border-bottom-width"])}  ${c1.left + c1.width - parseInt(c2["border-left-width"])}
  `;
  console.log(`c2`, c2);




    /**
     * Позиционирует элемент elem относительно элемента anchor в соответствии со значением position.
     *
     * @param {Node} anchor     элемент, около которого позиционируется другой элемент
     * @param {string} position одно из: top/right/bottom
     * @param {Node} elem       элемент, который позиционируется
     *
     * Оба элемента elem и anchor должны присутствовать в документе
     */
     function positionAt(anchor, position, elem) {
      // ... ваш код ...
      const anchCoords = anchor.getBoundingClientRect();
      const elemCoords = elem.getBoundingClientRect();
      elem.style.position = 'absolute';
      switch (position) {
        case 'bottom':
          elem.style.left = (window.pageXOffset + anchCoords.left) + "px";
          elem.style.top = (window.pageYOffset + anchCoords.top + anchCoords.height) + "px";
          break;
        case 'right':
          elem.style.left = (anchCoords.left + anchCoords.width) + "px";
          elem.style.top = (window.pageYOffset + anchCoords.top) + "px";
          break;
        case 'top':
          elem.style.left = (window.pageXOffset + anchCoords.left) + "px";
          elem.style.top = (window.pageYOffset + anchCoords.top - elem.getBoundingClientRect().height) + "px";
          break;
        case 'bottom-in':
          elem.style.left = (window.pageXOffset + anchCoords.left) + "px";
          elem.style.top = (window.pageYOffset + anchCoords.top + anchCoords.height - elemCoords.height) + "px";
          break;
        case 'right-in':
          elem.style.left = (anchCoords.left + anchCoords.width - elemCoords.width) + "px";
          elem.style.top = (window.pageYOffset + anchCoords.top) + "px";
          break;
        case 'top-in':
          elem.style.left = (window.pageXOffset + anchCoords.left) + "px";
          elem.style.top = (window.pageYOffset + anchCoords.top) + "px";
          break;
      }
    }

    /**
     * Показывает заметку с заданным содержимым на заданной позиции
     * относительно элемента anchor.
     */
    function showNote(anchor, position, html) {
      let note = document.createElement('div');
      note.className = "note";
      note.innerHTML = html;
      document.body.append(note);

      positionAt(anchor, position, note);
    }

    // test it
    let blockquote = document.querySelector('blockquote');

    showNote(blockquote, "top", "note above");
    showNote(blockquote, "right", "note at the right");
    showNote(blockquote, "bottom", "note below");
    showNote(blockquote, "bottom-in", "note below in");
    showNote(blockquote, "right-in", "note at the right in");
    showNote(blockquote, "top-in", "note at the top in");



    const getScrollBottom = (elem) => {
      return elem.scrollHeight - elem.scrollTop - elem.clientHeight;
    }

    const scrolDivObj = document.querySelector('.for-scroll');
    scrolDivObj.addEventListener('scroll', (event) => {
      document.querySelector('#scrollBottom-id').innerText = getScrollBottom(scrolDivObj);
    });


    const scrollbarWidth = scrolDivObj.offsetWidth - scrolDivObj.clientWidth - scrolDivObj.clientLeft;
    console.log(`scrollbarWidth`, scrollbarWidth);
    // console.log(`scrolDivObj`, window.getComputedStyle(scrolDivObj));


    // создадим элемент с прокруткой
    let div1 = document.createElement('div');

    div1.style.overflowY = 'scroll';
    div1.style.width = '50px';
    div1.style.height = '50px';

    // мы должны вставить элемент в документ, иначе размеры будут равны 0
    document.body.append(div1);
    let scrollWidth = div1.offsetWidth - div1.clientWidth;

    div1.remove();

    // alert(scrollWidth);



    const ballObj = document.querySelector('#ball');
    fieldObj = document.querySelector('#field');
    // const fieldCoords = fieldObj.getBoundingClientRect();
    ballObj.style.top = ballObj.style.top + fieldObj.clientHeight / 2  -  ballObj.offsetHeight / 2  +  'px';
      console.log(`offsetHeight`, ballObj.offsetHeight);
      console.log(`ballObj`, ballObj);


  </script>
</body>
</html>